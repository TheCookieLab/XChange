aW1wb3J0IGFzeW5jaW8KaW1wb3J0IGpzb24KaW1wb3J0IGxvZ2dpbmcKaW1w
b3J0IG9zCmltcG9ydCBzc2wKaW1wb3J0IHRocmVhZGluZwppbXBvcnQgdGlt
ZQpmcm9tIG11bHRpcHJvY2Vzc2luZyBpbXBvcnQgQXV0aGVudGljYXRpb25F
cnJvcgpmcm9tIHR5cGluZyBpbXBvcnQgSU8sIENhbGxhYmxlLCBMaXN0LCBP
cHRpb25hbCwgVW5pb24KCmltcG9ydCBiYWNrb2ZmCmltcG9ydCB3ZWJzb2Nr
ZXRzCgpmcm9tIGNvaW5iYXNlIGltcG9ydCBqd3RfZ2VuZXJhdG9yCmZyb20g
Y29pbmJhc2UuYXBpX2Jhc2UgaW1wb3J0IEFQSUJhc2UsIGdldF9sb2dnZXIK
ZnJvbSBjb2luYmFzZS5jb25zdGFudHMgaW1wb3J0ICgKICAgIEFQSV9FTlZf
S0VZLAogICAgQVBJX1NFQ1JFVF9FTlZfS0VZLAogICAgU1VCU0NSSUJFX01F
U1NBR0VfVFlQRSwKICAgIFVOU1VCU0NSSUJFX01FU1NBR0VfVFlQRSwKICAg
IFVTRVJfQUdFTlQsCiAgICBXU19BVVRIX0NIQU5ORUxTLAogICAgV1NfQkFT
RV9VUkwsCiAgICBXU19SRVRSWV9CQVNFLAogICAgV1NfUkVUUllfRkFDVE9S
LAogICAgV1NfUkVUUllfTUFYLAopCgpsb2dnZXIgPSBnZXRfbG9nZ2VyKCJj
b2luYmFzZS5XU0NsaWVudCIpCgoKY2xhc3MgV1NDbGllbnRFeGNlcHRpb24o
RXhjZXB0aW9uKToKICAgICIiIgogICAgKipXU0NsaWVudEV4Y2VwdGlvbioq
CiAgICBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
CgogICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0KCiAgICBFeGNlcHRpb24gcmFpc2VkIGZvciBlcnJvcnMgaW4gdGhlIFdl
YlNvY2tldCBjbGllbnQuCiAgICAiIiIKCiAgICBwYXNzCgoKY2xhc3MgV1ND
bGllbnRDb25uZWN0aW9uQ2xvc2VkRXhjZXB0aW9uKEV4Y2VwdGlvbik6CiAg
ICAiIiIKICAgICoqV1NDbGllbnRDb25uZWN0aW9uQ2xvc2VkRXhjZXB0aW9u
KioKICAgIF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KCiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tCgogICAgRXhjZXB0aW9uIHJhaXNlZCBmb3IgdW5leHBlY3RlZCBjbG9z
dXJlIGluIHRoZSBXZWJTb2NrZXQgY2xpZW50LgogICAgIiIiCgogICAgcGFz
cwoKCmNsYXNzIFdTQmFzZShBUElCYXNlKToKICAgICIiIgogICAgOm1ldGEg
cHJpdmF0ZToKICAgICIiIgoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBz
ZWxmLAogICAgICAgIGFwaV9rZXk6IE9wdGlvbmFsW3N0cl0gPSBvcy5nZXRl
bnYoQVBJX0VOVl9LRVkpLAogICAgICAgIGFwaV9zZWNyZXQ6IE9wdGlvbmFs
W3N0cl0gPSBvcy5nZXRlbnYoQVBJX1NFQ1JFVF9FTlZfS0VZKSwKICAgICAg
ICBrZXlfZmlsZTogT3B0aW9uYWxbVW5pb25bSU8sIHN0cl1dID0gTm9uZSwK
ICAgICAgICBiYXNlX3VybD1XU19CQVNFX1VSTCwKICAgICAgICB0aW1lb3V0
OiBPcHRpb25hbFtpbnRdID0gTm9uZSwKICAgICAgICBtYXhfc2l6ZTogT3B0
aW9uYWxbaW50XSA9IDEwICogMTAyNCAqIDEwMjQsCiAgICAgICAgb25fbWVz
c2FnZTogT3B0aW9uYWxbQ2FsbGFibGVbW3N0cl0sIE5vbmVdXSA9IE5vbmUs
CiAgICAgICAgb25fb3BlbjogT3B0aW9uYWxbQ2FsbGFibGVbW10sIE5vbmVd
XSA9IE5vbmUsCiAgICAgICAgb25fY2xvc2U6IE9wdGlvbmFsW0NhbGxhYmxl
W1tdLCBOb25lXV0gPSBOb25lLAogICAgICAgIHJldHJ5OiBPcHRpb25hbFti
b29sXSA9IFRydWUsCiAgICAgICAgdmVyYm9zZTogT3B0aW9uYWxbYm9vbF0g
PSBGYWxzZSwKICAgICk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygKICAg
ICAgICAgICAgYXBpX2tleT1hcGlfa2V5LAogICAgICAgICAgICBhcGlfc2Vj
cmV0PWFwaV9zZWNyZXQsCiAgICAgICAgICAgIGtleV9maWxlPWtleV9maWxl
LAogICAgICAgICAgICBiYXNlX3VybD1iYXNlX3VybCwKICAgICAgICAgICAg
dGltZW91dD10aW1lb3V0LAogICAgICAgICAgICB2ZXJib3NlPXZlcmJvc2Us
CiAgICAgICAgKQoKICAgICAgICBpZiBub3Qgb25fbWVzc2FnZToKICAgICAg
ICAgICAgcmFpc2UgV1NDbGllbnRFeGNlcHRpb24oIm9uX21lc3NhZ2UgY2Fs
bGJhY2sgaXMgcmVxdWlyZWQuIikKCiAgICAgICAgaWYgdmVyYm9zZToKICAg
ICAgICAgICAgbG9nZ2VyLnNldExldmVsKGxvZ2dpbmcuREVCVUcpCgogICAg
ICAgIHNlbGYubWF4X3NpemUgPSBtYXhfc2l6ZQogICAgICAgIHNlbGYub25f
bWVzc2FnZSA9IG9uX21lc3NhZ2UKICAgICAgICBzZWxmLm9uX29wZW4gPSBv
bl9vcGVuCiAgICAgICAgc2VsZi5vbl9jbG9zZSA9IG9uX2Nsb3NlCgogICAg
ICAgIHNlbGYud2Vic29ja2V0ID0gTm9uZQogICAgICAgIHNlbGYubG9vcCA9
IE5vbmUKICAgICAgICBzZWxmLnRocmVhZCA9IE5vbmUKICAgICAgICBzZWxm
Ll90YXNrID0gTm9uZQoKICAgICAgICBzZWxmLnJldHJ5ID0gcmV0cnkKICAg
ICAgICBzZWxmLl9yZXRyeV9tYXhfdHJpZXMgPSBXU19SRVRSWV9NQVgKICAg
ICAgICBzZWxmLl9yZXRyeV9iYXNlID0gV1NfUkVUUllfQkFTRQogICAgICAg
IHNlbGYuX3JldHJ5X2ZhY3RvciA9IFdTX1JFVFJZX0ZBQ1RPUgogICAgICAg
IHNlbGYuX3JldHJ5X2NvdW50ID0gMAoKICAgICAgICBzZWxmLnN1YnNjcmlw
dGlvbnMgPSB7fQogICAgICAgIHNlbGYuX2JhY2tncm91bmRfZXhjZXB0aW9u
ID0gTm9uZQogICAgICAgIHNlbGYuX3JldHJ5aW5nID0gRmFsc2UKCiAgICBk
ZWYgb3BlbihzZWxmKSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgICoq
T3BlbiBXZWJzb2NrZXQqKgogICAgICAgIF9fX19fX19fX19fX19fX19fXwoK
ICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgT3Bl
biB0aGUgd2Vic29ja2V0IGNsaWVudCBjb25uZWN0aW9uLgogICAgICAgICIi
IgogICAgICAgIGlmIG5vdCBzZWxmLmxvb3Agb3Igc2VsZi5sb29wLmlzX2Ns
b3NlZCgpOgogICAgICAgICAgICBzZWxmLmxvb3AgPSBhc3luY2lvLm5ld19l
dmVudF9sb29wKCkgICMgQ3JlYXRlIGEgbmV3IGV2ZW50IGxvb3AKICAgICAg
ICAgICAgc2VsZi50aHJlYWQgPSB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1z
ZWxmLmxvb3AucnVuX2ZvcmV2ZXIpCiAgICAgICAgICAgIHNlbGYudGhyZWFk
LmRhZW1vbiA9IFRydWUKICAgICAgICAgICAgc2VsZi50aHJlYWQuc3RhcnQo
KQoKICAgICAgICBzZWxmLl9ydW5fY29yb3V0aW5lX3RocmVhZHNhZmUoc2Vs
Zi5vcGVuX2FzeW5jKCkpCgogICAgYXN5bmMgZGVmIG9wZW5fYXN5bmMoc2Vs
ZikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICAqKk9wZW4gV2Vic29j
a2V0IEFzeW5jKioKICAgICAgICBfX19fX19fX19fX19fX19fX19fX19fX18K
CiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIE9w
ZW4gdGhlIHdlYnNvY2tldCBjbGllbnQgY29ubmVjdGlvbiBhc3luY2hyb25v
dXNseS4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9lbnN1cmVfd2Vic29j
a2V0X25vdF9vcGVuKCkKCiAgICAgICAgaGVhZGVycyA9IHNlbGYuX3NldF9o
ZWFkZXJzKCkKCiAgICAgICAgbG9nZ2VyLmRlYnVnKCJDb25uZWN0aW5nIHRv
ICVzIiwgc2VsZi5iYXNlX3VybCkKICAgICAgICB0cnk6CiAgICAgICAgICAg
IHNlbGYud2Vic29ja2V0ID0gYXdhaXQgd2Vic29ja2V0cy5jb25uZWN0KAog
ICAgICAgICAgICAgICAgc2VsZi5iYXNlX3VybCwKICAgICAgICAgICAgICAg
IG9wZW5fdGltZW91dD1zZWxmLnRpbWVvdXQsCiAgICAgICAgICAgICAgICBt
YXhfc2l6ZT1zZWxmLm1heF9zaXplLAogICAgICAgICAgICAgICAgdXNlcl9h
Z2VudF9oZWFkZXI9VVNFUl9BR0VOVCwKICAgICAgICAgICAgICAgIGV4dHJh
X2hlYWRlcnM9aGVhZGVycywKICAgICAgICAgICAgICAgIHNzbD1zc2wuU1NM
Q29udGV4dCgpIGlmIHNlbGYuYmFzZV91cmwuc3RhcnRzd2l0aCgid3NzOi8v
IikgZWxzZSBOb25lLAogICAgICAgICAgICApCiAgICAgICAgICAgIGxvZ2dl
ci5kZWJ1ZygiU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byAlcyIsIHNlbGYu
YmFzZV91cmwpCgogICAgICAgICAgICBpZiBzZWxmLm9uX29wZW46CiAgICAg
ICAgICAgICAgICBzZWxmLm9uX29wZW4oKQoKICAgICAgICAgICAgIyBTdGFy
dCB0aGUgbWVzc2FnZSBoYW5kbGVyIGNvcm91dGluZSBhZnRlciBlc3RhYmxp
c2hpbmcgY29ubmVjdGlvbgogICAgICAgICAgICBpZiBub3Qgc2VsZi5fcmV0
cnlpbmc6CiAgICAgICAgICAgICAgICBzZWxmLl90YXNrID0gYXN5bmNpby5j
cmVhdGVfdGFzayhzZWxmLl9tZXNzYWdlX2hhbmRsZXIoKSkKCiAgICAgICAg
ZXhjZXB0IGFzeW5jaW8uVGltZW91dEVycm9yIGFzIHRvZToKICAgICAgICAg
ICAgc2VsZi53ZWJzb2NrZXQgPSBOb25lCiAgICAgICAgICAgIGxvZ2dlci5l
cnJvcigiQ29ubmVjdGlvbiBhdHRlbXB0IHRpbWVkIG91dDogJXMiLCB0b2Up
CiAgICAgICAgICAgIHJhaXNlIFdTQ2xpZW50RXhjZXB0aW9uKCJDb25uZWN0
aW9uIGF0dGVtcHQgdGltZWQgb3V0IikgZnJvbSB0b2UKICAgICAgICBleGNl
cHQgKHdlYnNvY2tldHMuZXhjZXB0aW9ucy5XZWJTb2NrZXRFeGNlcHRpb24s
IE9TRXJyb3IpIGFzIHdzZToKICAgICAgICAgICAgc2VsZi53ZWJzb2NrZXQg
PSBOb25lCiAgICAgICAgICAgIGxvZ2dlci5lcnJvcigiRmFpbGVkIHRvIGVz
dGFibGlzaCBXZWJTb2NrZXQgY29ubmVjdGlvbjogJXMiLCB3c2UpCiAgICAg
ICAgICAgIHJhaXNlIFdTQ2xpZW50RXhjZXB0aW9uKCJGYWlsZWQgdG8gZXN0
YWJsaXNoIFdlYlNvY2tldCBjb25uZWN0aW9uIikgZnJvbSB3c2UKCiAgICBk
ZWYgY2xvc2Uoc2VsZikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICAq
KkNsb3NlIFdlYnNvY2tldCoqCiAgICAgICAgX19fX19fX19fX19fX19fX19f
XwoKICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAg
Q2xvc2UgdGhlIHdlYnNvY2tldCBjbGllbnQgY29ubmVjdGlvbi4KICAgICAg
ICAiIiIKICAgICAgICBpZiBzZWxmLmxvb3AgYW5kIG5vdCBzZWxmLmxvb3Au
aXNfY2xvc2VkKCk6CiAgICAgICAgICAgICMgU2NoZWR1bGUgdGhlIGFzeW5j
aHJvbm91cyBjbG9zZQogICAgICAgICAgICBzZWxmLl9ydW5fY29yb3V0aW5l
X3RocmVhZHNhZmUoc2VsZi5jbG9zZV9hc3luYygpKQogICAgICAgICAgICAj
IFN0b3AgdGhlIGV2ZW50IGxvb3AKICAgICAgICAgICAgc2VsZi5sb29wLmNh
bGxfc29vbl90aHJlYWRzYWZlKHNlbGYubG9vcC5zdG9wKQogICAgICAgICAg
ICAjIFdhaXQgZm9yIHRoZSB0aHJlYWQgdG8gZmluaXNoCiAgICAgICAgICAg
IHNlbGYudGhyZWFkLmpvaW4oKQogICAgICAgICAgICAjIENsb3NlIHRoZSBl
dmVudCBsb29wCiAgICAgICAgICAgIHNlbGYubG9vcC5jbG9zZSgpCiAgICAg
ICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgV1NDbGllbnRFeGNlcHRpb24o
IkV2ZW50IGxvb3AgaXMgbm90IHJ1bm5pbmcuIikKCiAgICBhc3luYyBkZWYg
Y2xvc2VfYXN5bmMoc2VsZikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAg
ICAqKkNsb3NlIFdlYnNvY2tldCBBc3luYyoqCiAgICAgICAgX19fX19fX19f
X19fX19fX19fX19fX19fXwoKICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0KCiAgICAgICAgQ2xvc2UgdGhlIHdlYnNvY2tldCBjbGllbnQgY29u
bmVjdGlvbiBhc3luY2hyb25vdXNseS4KICAgICAgICAiIiIKICAgICAgICBz
ZWxmLl9lbnN1cmVfd2Vic29ja2V0X29wZW4oKQoKICAgICAgICBsb2dnZXIu
ZGVidWcoIkNsb3NpbmcgY29ubmVjdGlvbiB0byAlcyIsIHNlbGYuYmFzZV91
cmwpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBhd2FpdCBzZWxmLndlYnNv
Y2tldC5jbG9zZSgpCiAgICAgICAgICAgIHNlbGYud2Vic29ja2V0ID0gTm9u
ZQogICAgICAgICAgICBzZWxmLnN1YnNjcmlwdGlvbnMgPSB7fQoKICAgICAg
ICAgICAgbG9nZ2VyLmRlYnVnKCJDb25uZWN0aW9uIGNsb3NlZCB0byAlcyIs
IHNlbGYuYmFzZV91cmwpCgogICAgICAgICAgICBpZiBzZWxmLm9uX2Nsb3Nl
OgogICAgICAgICAgICAgICAgc2VsZi5vbl9jbG9zZSgpCiAgICAgICAgZXhj
ZXB0ICh3ZWJzb2NrZXRzLmV4Y2VwdGlvbnMuV2ViU29ja2V0RXhjZXB0aW9u
LCBPU0Vycm9yKSBhcyB3c2U6CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcigi
RmFpbGVkIHRvIGNsb3NlIFdlYlNvY2tldCBjb25uZWN0aW9uOiAlcyIsIHdz
ZSkKICAgICAgICAgICAgcmFpc2UgV1NDbGllbnRFeGNlcHRpb24oIkZhaWxl
ZCB0byBjbG9zZSBXZWJTb2NrZXQgY29ubmVjdGlvbi4iKSBmcm9tIHdzZQoK
ICAgIGRlZiBzdWJzY3JpYmUoc2VsZiwgcHJvZHVjdF9pZHM6IExpc3Rbc3Ry
XSwgY2hhbm5lbHM6IExpc3Rbc3RyXSkgLT4gTm9uZToKICAgICAgICAiIiIK
ICAgICAgICAqKlN1YnNjcmliZSoqCiAgICAgICAgX19fX19fX19fX19fXwoK
ICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgU3Vi
c2NyaWJlIHRvIGEgbGlzdCBvZiBjaGFubmVscyBmb3IgYSBsaXN0IG9mIHBy
b2R1Y3QgaWRzLgoKICAgICAgICAtICoqcHJvZHVjdF9pZHMqKiAtIHByb2R1
Y3QgaWRzIHRvIHN1YnNjcmliZSB0bwogICAgICAgIC0gKipjaGFubmVscyoq
IC0gY2hhbm5lbHMgdG8gc3Vic2NyaWJlIHRvCiAgICAgICAgIiIiCiAgICAg
ICAgaWYgc2VsZi5sb29wIGFuZCBub3Qgc2VsZi5sb29wLmlzX2Nsb3NlZCgp
OgogICAgICAgICAgICBzZWxmLl9ydW5fY29yb3V0aW5lX3RocmVhZHNhZmUo
c2VsZi5zdWJzY3JpYmVfYXN5bmMocHJvZHVjdF9pZHMsIGNoYW5uZWxzKSkK
ICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBXU0NsaWVudEV4Y2Vw
dGlvbigiV2Vic29ja2V0IENsaWVudCBpcyBub3Qgb3Blbi4iKQoKICAgIGFz
eW5jIGRlZiBzdWJzY3JpYmVfYXN5bmMoCiAgICAgICAgc2VsZiwgcHJvZHVj
dF9pZHM6IExpc3Rbc3RyXSwgY2hhbm5lbHM6IExpc3Rbc3RyXQogICAgKSAt
PiBOb25lOgogICAgICAgICIiIgogICAgICAgICoqU3Vic2NyaWJlIEFzeW5j
KioKICAgICAgICBfX19fX19fX19fX19fX19fX19fCgogICAgICAgIC0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBBc3luYyBzdWJzY3JpYmUg
dG8gYSBsaXN0IG9mIGNoYW5uZWxzIGZvciBhIGxpc3Qgb2YgcHJvZHVjdCBp
ZHMuCgogICAgICAgIC0gKipwcm9kdWN0X2lkcyoqIC0gcHJvZHVjdCBpZHMg
dG8gc3Vic2NyaWJlIHRvCiAgICAgICAgLSAqKmNoYW5uZWxzKiogLSBjaGFu
bmVscyB0byBzdWJzY3JpYmUgdG8KICAgICAgICAiIiIKICAgICAgICBzZWxm
Ll9lbnN1cmVfd2Vic29ja2V0X29wZW4oKQogICAgICAgIGZvciBjaGFubmVs
IGluIGNoYW5uZWxzOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAg
ICBpZiBub3Qgc2VsZi5pc19hdXRoZW50aWNhdGVkIGFuZCBjaGFubmVsIGlu
IFdTX0FVVEhfQ0hBTk5FTFM6CiAgICAgICAgICAgICAgICAgICAgcmFpc2Ug
QXV0aGVudGljYXRpb25FcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAg
IlVuYXV0aGVudGljYXRlZCByZXF1ZXN0IHRvIHByaXZhdGUgY2hhbm5lbC4i
CiAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgIGlzX3B1
YmxpYyA9IEZhbHNlIGlmIGNoYW5uZWwgaW4gV1NfQVVUSF9DSEFOTkVMUyBl
bHNlIFRydWUKICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBzZWxmLl9idWls
ZF9zdWJzY3JpcHRpb25fbWVzc2FnZSgKICAgICAgICAgICAgICAgICAgICBw
cm9kdWN0X2lkcywgY2hhbm5lbCwgU1VCU0NSSUJFX01FU1NBR0VfVFlQRSwg
aXNfcHVibGljCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBq
c29uX21lc3NhZ2UgPSBqc29uLmR1bXBzKG1lc3NhZ2UpCgogICAgICAgICAg
ICAgICAgbG9nZ2VyLmRlYnVnKAogICAgICAgICAgICAgICAgICAgICJTdWJz
Y3JpYmluZyB0byBjaGFubmVsICVzIGZvciBwcm9kdWN0IElEczogJXMiLAog
ICAgICAgICAgICAgICAgICAgIGNoYW5uZWwsCiAgICAgICAgICAgICAgICAg
ICAgcHJvZHVjdF9pZHMsCiAgICAgICAgICAgICAgICApCgogICAgICAgICAg
ICAgICAgYXdhaXQgc2VsZi53ZWJzb2NrZXQuc2VuZChqc29uX21lc3NhZ2Up
CgogICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJTdWNjZXNzZnVsbHkg
c2VudCBzdWJzY3JpcHRpb24gbWVzc2FnZS4iKQoKICAgICAgICAgICAgICAg
ICMgYWRkIHRvIHN1YnNjcmlwdGlvbnMgbWFwCiAgICAgICAgICAgICAgICBp
ZiBjaGFubmVsIG5vdCBpbiBzZWxmLnN1YnNjcmlwdGlvbnM6CiAgICAgICAg
ICAgICAgICAgICAgc2VsZi5zdWJzY3JpcHRpb25zW2NoYW5uZWxdID0gc2V0
KCkKICAgICAgICAgICAgICAgIHNlbGYuc3Vic2NyaXB0aW9uc1tjaGFubmVs
XS51cGRhdGUocHJvZHVjdF9pZHMpCiAgICAgICAgICAgIGV4Y2VwdCB3ZWJz
b2NrZXRzLmV4Y2VwdGlvbnMuV2ViU29ja2V0RXhjZXB0aW9uIGFzIHdzZToK
ICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcigKICAgICAgICAgICAgICAg
ICAgICAiRmFpbGVkIHRvIHN1YnNjcmliZSB0byAlcyBjaGFubmVsIGZvciBw
cm9kdWN0IElEcyAlczogJXMiLAogICAgICAgICAgICAgICAgICAgIGNoYW5u
ZWwsCiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF9pZHMsCiAgICAgICAg
ICAgICAgICAgICAgd3NlLAogICAgICAgICAgICAgICAgKQogICAgICAgICAg
ICAgICAgcmFpc2UgV1NDbGllbnRFeGNlcHRpb24oCiAgICAgICAgICAgICAg
ICAgICAgZiJGYWlsZWQgdG8gc3Vic2NyaWJlIHRvIHtjaGFubmVsfSBjaGFu
bmVsIGZvciBwcm9kdWN0IGlkcyB7cHJvZHVjdF9pZHN9LiIKICAgICAgICAg
ICAgICAgICkgZnJvbSB3c2UKCiAgICBkZWYgdW5zdWJzY3JpYmUoc2VsZiwg
cHJvZHVjdF9pZHM6IExpc3Rbc3RyXSwgY2hhbm5lbHM6IExpc3Rbc3RyXSkg
LT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICAqKlVuc3Vic2NyaWJlKioK
ICAgICAgICBfX19fX19fX19fX19fX18KCiAgICAgICAgLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCgogICAgICAgIFVuc3Vic2NyaWJlIHRvIGEgbGlzdCBv
ZiBjaGFubmVscyBmb3IgYSBsaXN0IG9mIHByb2R1Y3QgaWRzLgoKICAgICAg
ICAtICoqcHJvZHVjdF9pZHMqKiAtIHByb2R1Y3QgaWRzIHRvIHVuc3Vic2Ny
aWJlIGZyb20KICAgICAgICAtICoqY2hhbm5lbHMqKiAtIGNoYW5uZWxzIHRv
IHVuc3Vic2NyaWJlIGZyb20KICAgICAgICAiIiIKICAgICAgICBpZiBzZWxm
Lmxvb3AgYW5kIG5vdCBzZWxmLmxvb3AuaXNfY2xvc2VkKCk6CiAgICAgICAg
ICAgIHNlbGYuX3J1bl9jb3JvdXRpbmVfdGhyZWFkc2FmZSgKICAgICAgICAg
ICAgICAgIHNlbGYudW5zdWJzY3JpYmVfYXN5bmMocHJvZHVjdF9pZHMsIGNo
YW5uZWxzKQogICAgICAgICAgICApCiAgICAgICAgZWxzZToKICAgICAgICAg
ICAgcmFpc2UgV1NDbGllbnRFeGNlcHRpb24oIldlYnNvY2tldCBDbGllbnQg
aXMgbm90IG9wZW4uIikKCiAgICBhc3luYyBkZWYgdW5zdWJzY3JpYmVfYXN5
bmMoCiAgICAgICAgc2VsZiwgcHJvZHVjdF9pZHM6IExpc3Rbc3RyXSwgY2hh
bm5lbHM6IExpc3Rbc3RyXQogICAgKSAtPiBOb25lOgogICAgICAgICIiIgog
ICAgICAgICoqVW5zdWJzY3JpYmUgQXN5bmMqKgogICAgICAgIF9fX19fX19f
X19fX19fX19fX19fXwoKICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0KCiAgICAgICAgQXN5bmMgdW5zdWJzY3JpYmUgdG8gYSBsaXN0IG9mIGNo
YW5uZWxzIGZvciBhIGxpc3Qgb2YgcHJvZHVjdCBpZHMuCgogICAgICAgIC0g
Kipwcm9kdWN0X2lkcyoqIC0gcHJvZHVjdCBpZHMgdG8gdW5zdWJzY3JpYmUg
ZnJvbQogICAgICAgIC0gKipjaGFubmVscyoqIC0gY2hhbm5lbHMgdG8gdW5z
dWJzY3JpYmUgZnJvbQogICAgICAgICIiIgogICAgICAgIHNlbGYuX2Vuc3Vy
ZV93ZWJzb2NrZXRfb3BlbigpCiAgICAgICAgZm9yIGNoYW5uZWwgaW4gY2hh
bm5lbHM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGlmIG5v
dCBzZWxmLmlzX2F1dGhlbnRpY2F0ZWQgYW5kIGNoYW5uZWwgaW4gV1NfQVVU
SF9DSEFOTkVMUzoKICAgICAgICAgICAgICAgICAgICByYWlzZSBBdXRoZW50
aWNhdGlvbkVycm9yKAogICAgICAgICAgICAgICAgICAgICAgICAiVW5hdXRo
ZW50aWNhdGVkIHJlcXVlc3QgdG8gcHJpdmF0ZSBjaGFubmVsLiBJZiB5b3Ug
d2lzaCB0byBhY2Nlc3MgcHJpdmF0ZSBjaGFubmVscywgeW91IG11c3QgcHJv
dmlkZSB5b3VyIEFQSSBrZXkgYW5kIHNlY3JldCB3aGVuIGluaXRpYWxpemlu
ZyB0aGUgV1NDbGllbnQuIgogICAgICAgICAgICAgICAgICAgICkKICAgICAg
ICAgICAgICAgIGlzX3B1YmxpYyA9IEZhbHNlIGlmIGNoYW5uZWwgaW4gV1Nf
QVVUSF9DSEFOTkVMUyBlbHNlIFRydWUKICAgICAgICAgICAgICAgIG1lc3Nh
Z2UgPSBzZWxmLl9idWlsZF9zdWJzY3JpcHRpb25fbWVzc2FnZSgKICAgICAg
ICAgICAgICAgICAgICBwcm9kdWN0X2lkcywgY2hhbm5lbCwgVU5TVUJTQ1JJ
QkVfTUVTU0FHRV9UWVBFLCBpc19wdWJsaWMKICAgICAgICAgICAgICAgICkK
ICAgICAgICAgICAgICAgIGpzb25fbWVzc2FnZSA9IGpzb24uZHVtcHMobWVz
c2FnZSkKCiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoCiAgICAgICAg
ICAgICAgICAgICAgIlVuc3Vic2NyaWJpbmcgZnJvbSBjaGFubmVsICVzIGZv
ciBwcm9kdWN0IElEczogJXMiLAogICAgICAgICAgICAgICAgICAgIGNoYW5u
ZWwsCiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF9pZHMsCiAgICAgICAg
ICAgICAgICApCgogICAgICAgICAgICAgICAgYXdhaXQgc2VsZi53ZWJzb2Nr
ZXQuc2VuZChqc29uX21lc3NhZ2UpCgogICAgICAgICAgICAgICAgbG9nZ2Vy
LmRlYnVnKCJTdWNjZXNzZnVsbHkgc2VudCB1bnN1YnNjcmliZSBtZXNzYWdl
LiIpCgogICAgICAgICAgICAgICAgIyByZW1vdmUgZnJvbSBzdWJzY3JpcHRp
b25zIG1hcAogICAgICAgICAgICAgICAgaWYgY2hhbm5lbCBpbiBzZWxmLnN1
YnNjcmlwdGlvbnM6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zdWJzY3Jp
cHRpb25zW2NoYW5uZWxdLmRpZmZlcmVuY2VfdXBkYXRlKHByb2R1Y3RfaWRz
KQogICAgICAgICAgICBleGNlcHQgKHdlYnNvY2tldHMuZXhjZXB0aW9ucy5X
ZWJTb2NrZXRFeGNlcHRpb24sIE9TRXJyb3IpIGFzIHdzZToKICAgICAgICAg
ICAgICAgIGxvZ2dlci5lcnJvcigKICAgICAgICAgICAgICAgICAgICAiRmFp
bGVkIHRvIHVuc3Vic2NyaWJlIHRvICVzIGNoYW5uZWwgZm9yIHByb2R1Y3Qg
SURzICVzOiAlcyIsCiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbCwKICAg
ICAgICAgICAgICAgICAgICBwcm9kdWN0X2lkcywKICAgICAgICAgICAgICAg
ICAgICB3c2UsCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAg
cmFpc2UgV1NDbGllbnRFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAg
ZiJGYWlsZWQgdG8gdW5zdWJzY3JpYmUgdG8ge2NoYW5uZWx9IGNoYW5uZWwg
Zm9yIHByb2R1Y3QgaWRzIHtwcm9kdWN0X2lkc30uIgogICAgICAgICAgICAg
ICAgKSBmcm9tIHdzZQoKICAgIGRlZiB1bnN1YnNjcmliZV9hbGwoc2VsZikg
LT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICAqKlVuc3Vic2NyaWJlIEFs
bCoqCiAgICAgICAgX19fX19fX19fX19fX19fX19fX19fX19fCgogICAgICAg
IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBVbnN1YnNjcmli
ZSBmcm9tIGFsbCBjaGFubmVscyB5b3UgYXJlIGN1cnJlbnRseSBzdWJzY3Jp
YmVkIHRvLgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYubG9vcCBhbmQg
bm90IHNlbGYubG9vcC5pc19jbG9zZWQoKToKICAgICAgICAgICAgc2VsZi5f
cnVuX2Nvcm91dGluZV90aHJlYWRzYWZlKHNlbGYudW5zdWJzY3JpYmVfYWxs
X2FzeW5jKCkpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgV1ND
bGllbnRFeGNlcHRpb24oIldlYnNvY2tldCBDbGllbnQgaXMgbm90IG9wZW4u
IikKCiAgICBhc3luYyBkZWYgdW5zdWJzY3JpYmVfYWxsX2FzeW5jKHNlbGYp
IC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgKipVbnN1YnNjcmliZSBB
bGwgQXN5bmMqKgogICAgICAgIF9fX19fX19fX19fX19fX19fX19fX19fX18K
CiAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIEFz
eW5jIHVuc3Vic2NyaWJlIGZyb20gYWxsIGNoYW5uZWxzIHlvdSBhcmUgY3Vy
cmVudGx5IHN1YnNjcmliZWQgdG8uCiAgICAgICAgIiIiCiAgICAgICAgZm9y
IGNoYW5uZWwsIHByb2R1Y3RfaWRzIGluIHNlbGYuc3Vic2NyaXB0aW9ucy5p
dGVtcygpOgogICAgICAgICAgICBpZiBwcm9kdWN0X2lkczoKICAgICAgICAg
ICAgICAgIGF3YWl0IHNlbGYudW5zdWJzY3JpYmVfYXN5bmMobGlzdChwcm9k
dWN0X2lkcyksIFtjaGFubmVsXSkKCiAgICBkZWYgc2xlZXBfd2l0aF9leGNl
cHRpb25fY2hlY2soc2VsZiwgc2xlZXA6IGludCkgLT4gTm9uZToKICAgICAg
ICAiIiIKICAgICAgICAqKlNsZWVwIHdpdGggRXhjZXB0aW9uIENoZWNrKioK
ICAgICAgICBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCiAgICAg
ICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIFNsZWVwIGZv
ciBhIHNwZWNpZmllZCBudW1iZXIgb2Ygc2Vjb25kcyBhbmQgY2hlY2sgZm9y
IGJhY2tncm91bmQgZXhjZXB0aW9ucy4KCiAgICAgICAgLSAqKnNsZWVwKiog
LSBudW1iZXIgb2Ygc2Vjb25kcyB0byBzbGVlcC4KICAgICAgICAiIiIKICAg
ICAgICB0aW1lLnNsZWVwKHNsZWVwKQogICAgICAgIHNlbGYucmFpc2VfYmFj
a2dyb3VuZF9leGNlcHRpb24oKQoKICAgIGFzeW5jIGRlZiBzbGVlcF93aXRo
X2V4Y2VwdGlvbl9jaGVja19hc3luYyhzZWxmLCBzbGVlcDogaW50KSAtPiBO
b25lOgogICAgICAgICIiIgogICAgICAgICoqU2xlZXAgd2l0aCBFeGNlcHRp
b24gQ2hlY2sgQXN5bmMqKgogICAgICAgIF9fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwoKICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0KCiAgICAgICAgQXN5bmMgc2xlZXAgZm9yIGEgc3BlY2lmaWVkIG51
bWJlciBvZiBzZWNvbmRzIGFuZCBjaGVjayBmb3IgYmFja2dyb3VuZCBleGNl
cHRpb25zLgoKICAgICAgICAtICoqc2xlZXAqKiAtIG51bWJlciBvZiBzZWNv
bmRzIHRvIHNsZWVwLgogICAgICAgICIiIgogICAgICAgIGF3YWl0IGFzeW5j
aW8uc2xlZXAoc2xlZXApCiAgICAgICAgc2VsZi5yYWlzZV9iYWNrZ3JvdW5k
X2V4Y2VwdGlvbigpCgogICAgZGVmIHJ1bl9mb3JldmVyX3dpdGhfZXhjZXB0
aW9uX2NoZWNrKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAg
KipSdW4gRm9yZXZlciB3aXRoIEV4Y2VwdGlvbiBDaGVjayoqCiAgICAgICAg
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCgogICAgICAg
IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBSdW5zIGFuIGVu
ZGxlc3MgbG9vcCwgY2hlY2tpbmcgZm9yIGJhY2tncm91bmQgZXhjZXB0aW9u
cyBldmVyeSBzZWNvbmQuCiAgICAgICAgIiIiCiAgICAgICAgd2hpbGUgVHJ1
ZToKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICBzZWxm
LnJhaXNlX2JhY2tncm91bmRfZXhjZXB0aW9uKCkKCiAgICBhc3luYyBkZWYg
cnVuX2ZvcmV2ZXJfd2l0aF9leGNlcHRpb25fY2hlY2tfYXN5bmMoc2VsZikg
LT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICAqKlJ1biBGb3JldmVyIHdp
dGggRXhjZXB0aW9uIENoZWNrIEFzeW5jKioKICAgICAgICBfX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KCiAgICAgICAgLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIEFzeW5jIHJ1bnMgYW4g
ZW5kbGVzcyBsb29wLCBjaGVja2luZyBmb3IgYmFja2dyb3VuZCBleGNlcHRp
b25zIGV2ZXJ5IHNlY29uZC4KICAgICAgICAiIiIKICAgICAgICB3aGlsZSBU
cnVlOgogICAgICAgICAgICBhd2FpdCBhc3luY2lvLnNsZWVwKDEpCiAgICAg
ICAgICAgIHNlbGYucmFpc2VfYmFja2dyb3VuZF9leGNlcHRpb24oKQoKICAg
IGRlZiByYWlzZV9iYWNrZ3JvdW5kX2V4Y2VwdGlvbihzZWxmKSAtPiBOb25l
OgogICAgICAgICIiIgogICAgICAgICoqUmFpc2UgQmFja2dyb3VuZCBFeGNl
cHRpb24qKgogICAgICAgIF9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
XwoKICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAg
UmFpc2UgYW55IGJhY2tncm91bmQgZXhjZXB0aW9ucyB0aGF0IG9jY3VycmVk
IGluIHRoZSBtZXNzYWdlIGhhbmRsZXIuCiAgICAgICAgIiIiCiAgICAgICAg
aWYgc2VsZi5fYmFja2dyb3VuZF9leGNlcHRpb246CiAgICAgICAgICAgIGV4
Y2VwdGlvbl90b19yYWlzZSA9IHNlbGYuX2JhY2tncm91bmRfZXhjZXB0aW9u
CiAgICAgICAgICAgIHNlbGYuX2JhY2tncm91bmRfZXhjZXB0aW9uID0gTm9u
ZQogICAgICAgICAgICByYWlzZSBleGNlcHRpb25fdG9fcmFpc2UKCiAgICBk
ZWYgX3J1bl9jb3JvdXRpbmVfdGhyZWFkc2FmZShzZWxmLCBjb3JvKToKICAg
ICAgICAiIiIKICAgICAgICA6bWV0YSBwcml2YXRlOgogICAgICAgICIiIgog
ICAgICAgIGZ1dHVyZSA9IGFzeW5jaW8ucnVuX2Nvcm91dGluZV90aHJlYWRz
YWZlKGNvcm8sIHNlbGYubG9vcCkKICAgICAgICByZXR1cm4gZnV0dXJlLnJl
c3VsdCgpCgogICAgZGVmIF9pc193ZWJzb2NrZXRfb3BlbihzZWxmKToKICAg
ICAgICAiIiIKICAgICAgICA6bWV0YSBwcml2YXRlOgogICAgICAgICIiIgog
ICAgICAgIHJldHVybiBzZWxmLndlYnNvY2tldCBhbmQgc2VsZi53ZWJzb2Nr
ZXQub3BlbgoKICAgIGFzeW5jIGRlZiBfcmVzdWJzY3JpYmUoc2VsZik6CiAg
ICAgICAgIiIiCiAgICAgICAgOm1ldGEgcHJpdmF0ZToKICAgICAgICAiIiIK
ICAgICAgICBmb3IgY2hhbm5lbCwgcHJvZHVjdF9pZHMgaW4gc2VsZi5zdWJz
Y3JpcHRpb25zLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIHByb2R1Y3RfaWRz
OgogICAgICAgICAgICAgICAgYXdhaXQgc2VsZi5zdWJzY3JpYmVfYXN5bmMo
bGlzdChwcm9kdWN0X2lkcyksIFtjaGFubmVsXSkKCiAgICBhc3luYyBkZWYg
X3JldHJ5X2Nvbm5lY3Rpb24oc2VsZik6CiAgICAgICAgIiIiCiAgICAgICAg
Om1ldGEgcHJpdmF0ZToKICAgICAgICAiIiIKICAgICAgICBzZWxmLl9yZXRy
eV9jb3VudCA9IDAKCiAgICAgICAgQGJhY2tvZmYub25fZXhjZXB0aW9uKAog
ICAgICAgICAgICBiYWNrb2ZmLmV4cG8sCiAgICAgICAgICAgIFdTQ2xpZW50
RXhjZXB0aW9uLAogICAgICAgICAgICBtYXhfdHJpZXM9c2VsZi5fcmV0cnlf
bWF4X3RyaWVzLAogICAgICAgICAgICBiYXNlPXNlbGYuX3JldHJ5X2Jhc2Us
CiAgICAgICAgICAgIGZhY3Rvcj1zZWxmLl9yZXRyeV9mYWN0b3IsCiAgICAg
ICAgKQogICAgICAgIGFzeW5jIGRlZiBfcmV0cnlfY29ubmVjdF9hbmRfcmVz
dWJzY3JpYmUoKToKICAgICAgICAgICAgc2VsZi5fcmV0cnlfY291bnQgKz0g
MQoKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJSZXRyeWluZyBjb25uZWN0
aW9uIGF0dGVtcHQgJXMiLCBzZWxmLl9yZXRyeV9jb3VudCkKICAgICAgICAg
ICAgaWYgbm90IHNlbGYuX2lzX3dlYnNvY2tldF9vcGVuKCk6CiAgICAgICAg
ICAgICAgICBhd2FpdCBzZWxmLm9wZW5fYXN5bmMoKQoKICAgICAgICAgICAg
bG9nZ2VyLmRlYnVnKCJSZXN1YnNjcmliaW5nIHRvIGNoYW5uZWxzIikKICAg
ICAgICAgICAgc2VsZi5fcmV0cnlfY291bnQgPSAwCiAgICAgICAgICAgIGF3
YWl0IHNlbGYuX3Jlc3Vic2NyaWJlKCkKCiAgICAgICAgcmV0dXJuIGF3YWl0
IF9yZXRyeV9jb25uZWN0X2FuZF9yZXN1YnNjcmliZSgpCgogICAgYXN5bmMg
ZGVmIF9tZXNzYWdlX2hhbmRsZXIoc2VsZik6CiAgICAgICAgIiIiCiAgICAg
ICAgOm1ldGEgcHJpdmF0ZToKICAgICAgICAiIiIKICAgICAgICBzZWxmLmhh
bmRsZXJfb3BlbiA9IFRydWUKICAgICAgICB3aGlsZSBzZWxmLl9pc193ZWJz
b2NrZXRfb3BlbigpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAg
ICBtZXNzYWdlID0gYXdhaXQgc2VsZi53ZWJzb2NrZXQucmVjdigpCiAgICAg
ICAgICAgICAgICBpZiBzZWxmLm9uX21lc3NhZ2U6CiAgICAgICAgICAgICAg
ICAgICAgc2VsZi5vbl9tZXNzYWdlKG1lc3NhZ2UpCiAgICAgICAgICAgIGV4
Y2VwdCB3ZWJzb2NrZXRzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkNsb3NlZE9L
IGFzIGNjbzoKICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiQ29ubmVj
dGlvbiBjbG9zZWQgKE9LKTogJXMiLCBjY28pCiAgICAgICAgICAgICAgICBi
cmVhawogICAgICAgICAgICBleGNlcHQgd2Vic29ja2V0cy5leGNlcHRpb25z
LkNvbm5lY3Rpb25DbG9zZWRFcnJvciBhcyBjY2U6CiAgICAgICAgICAgICAg
ICBsb2dnZXIuZXJyb3IoIkNvbm5lY3Rpb24gY2xvc2VkIChFUlJPUik6ICVz
IiwgY2NlKQogICAgICAgICAgICAgICAgaWYgc2VsZi5yZXRyeToKICAgICAg
ICAgICAgICAgICAgICBzZWxmLl9yZXRyeWluZyA9IFRydWUKICAgICAgICAg
ICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dl
ci5kZWJ1ZygiUmV0cnlpbmcgY29ubmVjdGlvbiIpCiAgICAgICAgICAgICAg
ICAgICAgICAgIGF3YWl0IHNlbGYuX3JldHJ5X2Nvbm5lY3Rpb24oKQogICAg
ICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZXRyeWluZyA9IEZhbHNlCiAg
ICAgICAgICAgICAgICAgICAgZXhjZXB0IFdTQ2xpZW50RXhjZXB0aW9uOgog
ICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAiQ29ubmVjdGlvbiBjbG9zZWQgdW5leHBl
Y3RlZGx5LiBSZXRyeSBhdHRlbXB0cyBmYWlsZWQuIgogICAgICAgICAgICAg
ICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2Jh
Y2tncm91bmRfZXhjZXB0aW9uID0gV1NDbGllbnRDb25uZWN0aW9uQ2xvc2Vk
RXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNvbm5l
Y3Rpb24gY2xvc2VkIHVuZXhwZWN0ZWRseS4gUmV0cnkgYXR0ZW1wdHMgZmFp
bGVkLiIKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAg
ICAgICAgICAgICBzZWxmLnN1YnNjcmlwdGlvbnMgPSB7fQogICAgICAgICAg
ICAgICAgICAgICAgICBzZWxmLl9yZXRyeWluZyA9IEZhbHNlCiAgICAgICAg
ICAgICAgICAgICAgICAgIHNlbGYuX3JldHJ5X2NvdW50ID0gMAogICAgICAg
ICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZWxzZToK
ICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoIkNvbm5lY3Rpb24g
Y2xvc2VkIHVuZXhwZWN0ZWRseSB3aXRoIGVycm9yOiAlcyIsIGNjZSkKICAg
ICAgICAgICAgICAgICAgICBzZWxmLl9iYWNrZ3JvdW5kX2V4Y2VwdGlvbiA9
IFdTQ2xpZW50Q29ubmVjdGlvbkNsb3NlZEV4Y2VwdGlvbigKICAgICAgICAg
ICAgICAgICAgICAgICAgZiJDb25uZWN0aW9uIGNsb3NlZCB1bmV4cGVjdGVk
bHkgd2l0aCBlcnJvcjoge2NjZX0iCiAgICAgICAgICAgICAgICAgICAgKQog
ICAgICAgICAgICAgICAgICAgIHNlbGYuc3Vic2NyaXB0aW9ucyA9IHt9CiAg
ICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZXhjZXB0ICgK
ICAgICAgICAgICAgICAgIHdlYnNvY2tldHMuZXhjZXB0aW9ucy5XZWJTb2Nr
ZXRFeGNlcHRpb24sCiAgICAgICAgICAgICAgICBqc29uLkpTT05EZWNvZGVF
cnJvciwKICAgICAgICAgICAgICAgIFdTQ2xpZW50RXhjZXB0aW9uLAogICAg
ICAgICAgICApIGFzIGU6CiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3Io
IkV4Y2VwdGlvbiBpbiBtZXNzYWdlIGhhbmRsZXI6ICVzIiwgZSkKICAgICAg
ICAgICAgICAgIHNlbGYuX2JhY2tncm91bmRfZXhjZXB0aW9uID0gV1NDbGll
bnRFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgZiJFeGNlcHRpb24g
aW4gbWVzc2FnZSBoYW5kbGVyOiB7ZX0iCiAgICAgICAgICAgICAgICApCiAg
ICAgICAgICAgICAgICBicmVhawoKICAgIGRlZiBfYnVpbGRfc3Vic2NyaXB0
aW9uX21lc3NhZ2UoCiAgICAgICAgc2VsZiwgcHJvZHVjdF9pZHM6IExpc3Rb
c3RyXSwgY2hhbm5lbDogc3RyLCBtZXNzYWdlX3R5cGU6IHN0ciwgcHVibGlj
OiBib29sCiAgICApOgogICAgICAgICIiIgogICAgICAgIDptZXRhIHByaXZh
dGU6CiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAg
InR5cGUiOiBtZXNzYWdlX3R5cGUsCiAgICAgICAgICAgICJwcm9kdWN0X2lk
cyI6IHByb2R1Y3RfaWRzLAogICAgICAgICAgICAiY2hhbm5lbCI6IGNoYW5u
ZWwsCiAgICAgICAgICAgICoqKAogICAgICAgICAgICAgICAgewogICAgICAg
ICAgICAgICAgICAgICJqd3QiOiBqd3RfZ2VuZXJhdG9yLmJ1aWxkX3dzX2p3
dChzZWxmLmFwaV9rZXksIHNlbGYuYXBpX3NlY3JldCksCiAgICAgICAgICAg
ICAgICB9CiAgICAgICAgICAgICAgICBpZiBzZWxmLmlzX2F1dGhlbnRpY2F0
ZWQKICAgICAgICAgICAgICAgIGVsc2Uge30KICAgICAgICAgICAgKSwKICAg
ICAgICB9CgogICAgZGVmIF9lbnN1cmVfd2Vic29ja2V0X25vdF9vcGVuKHNl
bGYpOgogICAgICAgICIiIgogICAgICAgIDptZXRhIHByaXZhdGU6CiAgICAg
ICAgIiIiCiAgICAgICAgaWYgc2VsZi5faXNfd2Vic29ja2V0X29wZW4oKToK
ICAgICAgICAgICAgcmFpc2UgV1NDbGllbnRFeGNlcHRpb24oIldlYlNvY2tl
dCBpcyBhbHJlYWR5IG9wZW4uIikKCiAgICBkZWYgX2Vuc3VyZV93ZWJzb2Nr
ZXRfb3BlbihzZWxmKToKICAgICAgICAiIiIKICAgICAgICA6bWV0YSBwcml2
YXRlOgogICAgICAgICIiIgogICAgICAgIGlmIG5vdCBzZWxmLl9pc193ZWJz
b2NrZXRfb3BlbigpOgogICAgICAgICAgICByYWlzZSBXU0NsaWVudEV4Y2Vw
dGlvbigiV2ViU29ja2V0IGlzIGNsb3NlZCBvciB3YXMgbmV2ZXIgb3BlbmVk
LiIpCgogICAgZGVmIF9zZXRfaGVhZGVycyhzZWxmKToKICAgICAgICAiIiIK
ICAgICAgICA6bWV0YSBwcml2YXRlOgogICAgICAgICIiIgogICAgICAgIGlm
IHNlbGYuX3JldHJ5X2NvdW50ID4gMDoKICAgICAgICAgICAgcmV0dXJuIHsi
eC1jYi1yZXRyeS1jb3VudGVyIjogc3RyKHNlbGYuX3JldHJ5X2NvdW50KX0K
ICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4ge30K

